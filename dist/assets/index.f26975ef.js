/* empty css                  */import{v as A}from"./el-loading.0603de45.js";import{E as F,a as $}from"./el-tag.899c78ba.js";import"./el-tooltip.89296c46.js";import{E as H}from"./el-icon.2297d2f2.js";import{E as P}from"./el-link.5febf8e5.js";import{s as S}from"./index.47fcd92c.js";import{az as j,r as u,Z as G,$ as W,F as Z,W as q,o as w,g as J,C as n,M as t,w as o,S as K,f as Q,aD as c,V as b,k as C,t as y,aG as R,a0 as X,a1 as Y}from"./index.2f5fdfe0.js";import{u as ee}from"./index.ad1a16d1.js";import{_ as te}from"./_plugin-vue_export-helper.cdc0426e.js";import"./debounce.bcee758e.js";const ae=i=>(X("data-v-d2a6b659"),i=i(),Y(),i),oe={class:"share-button-content"},ne={class:"cancel-button-content"},se={class:"share-list-content"},le={class:"share-name-content"},re=ae(()=>n("i",{class:"fa fa-share-alt",style:{"margin-right":"15px","font-size":"20px",cursor:"pointer"}},null,-1)),ce={style:{cursor:"pointer"}},ie={class:"share-operation-content"},de={__name:"index",setup(i){const{toClipboard:k}=ee(),x=j(),m=u([]),E=u(window.innerHeight-200),d=u([]),h=u(!0),f=()=>{h.value=!0,S.getShares(e=>{h.value=!1,m.value=e.data},e=>{h.value=!1,c.error(e.message)})};G(()=>{x.setSearchFlag(!1),f()});const g=e=>{R.confirm("Are you sure you want to cancel?","Cancel Share",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(()=>{S.cancelShare({shareIds:e},()=>{c.success("Share Cancelled"),f()},a=>{c.error(a.message)})})},T=()=>{if(d.value&&d.value.length>0){let e=new Array;d.value.forEach(a=>{e.push(a.shareId)}),g(e.join("__,__"));return}c.error("Please select the share(s) you want to undo")},B=e=>{g(e.shareId)},I=e=>{d.value=e},L=(e,a,s,p)=>{b.showOperation(s)},M=(e,a,s,p)=>{b.hiddenOperation(s)},D=(e,a,s,p)=>e.shareStatus===1?"Share was cancelled":e.shareDayType===0?"Valid Permanently":e.shareEndTime+" Expired",N=async e=>{try{let a="Link: "+e.shareUrl+`
Code: `+e.shareCode+`
Send the link to friends now!`;await k(a),c.success("Copied")}catch(a){console.error(a),c.error("Copy failed, please try again.")}};return(e,a)=>{const s=W("SwitchButton"),p=Z,_=q,l=F,v=H,V=P,z=$,U=A;return w(),J("div",null,[n("div",oe,[n("div",ne,[t(_,{type:"danger",size:"default",round:"",onClick:T},{default:o(()=>[C(" Cancel Share "),t(p,{class:"el-icon--right"},{default:o(()=>[t(s)]),_:1})]),_:1})])]),n("div",se,[K((w(),Q(z,{ref:"shareTable",data:m.value,height:E.value,"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:I,onCellMouseEnter:L,onCellMouseLeave:M},{default:o(()=>[t(l,{type:"selection",width:"55"}),t(l,{label:"Share Name",prop:"shareName",sortable:"","show-overflow-tooltip":"","min-width":"750"},{default:o(r=>[n("div",le,[re,n("span",ce,y(r.row.shareName),1)]),n("div",ie,[t(v,{class:"item",effect:"light",content:"Copy Link",placement:"top"},{default:o(()=>[t(_,{type:"success",size:"small",circle:"",onClick:O=>N(r.row),icon:"Link"},null,8,["onClick"])]),_:2},1024),t(v,{class:"item",effect:"light",content:"Cancel",placement:"top"},{default:o(()=>[t(_,{type:"danger",size:"small",circle:"",onClick:O=>B(r.row),icon:"SwitchButton"},null,8,["onClick"])]),_:2},1024)])]),_:1}),t(l,{prop:"shareUrl",sortable:"",align:"center",label:"Link","min-width":"300"},{default:o(r=>[t(V,{type:"primary",href:r.row.shareUrl,target:"_blank"},{default:o(()=>[C(y(r.row.shareUrl.substring(0,30)+"..."),1)]),_:2},1032,["href"])]),_:1}),t(l,{prop:"shareCode",sortable:"",align:"center",label:"Code","min-width":"140"}),t(l,{prop:"createTime",sortable:"",align:"center",label:"Share Time","min-width":"240"}),t(l,{prop:"shareStatus",sortable:"",label:"Share Status","min-width":"240",align:"center",formatter:D})]),_:1},8,["data","height"])),[[U,h.value]])])])}}},Ce=te(de,[["__scopeId","data-v-d2a6b659"]]);export{Ce as default};
